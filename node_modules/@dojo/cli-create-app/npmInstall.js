"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const chalk_1 = require("chalk");
const cs = require('cross-spawn');
const ora = require('ora');
function default_1() {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        return new Promise((resolve, reject) => {
            const spinner = ora({
                spinner: 'dots',
                color: 'white',
                text: 'npm install'
            }).start();
            cs.spawn('npm', ['install'], { stdio: 'ignore' })
                .on('exit', function (code) {
                if (code !== 0) {
                    spinner.stopAndPersist(chalk_1.default.red.bold(' failed'));
                    reject(new Error(`exit code: ${code}`));
                }
                else {
                    spinner.stopAndPersist(chalk_1.default.green.bold(' completed'));
                    resolve();
                }
            })
                .on('error', (err) => {
                spinner.stopAndPersist(chalk_1.default.red.bold(' failed'));
                reject(err);
            });
        });
    });
}
exports.default = default_1;
//# sourceMappingURL=npmInstall.js.map